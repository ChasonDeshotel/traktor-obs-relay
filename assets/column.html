<html>
    <head>
        <title>History Widget</title>
        <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=RocknRoll+One&display=swap" rel="stylesheet">
        <link href="column.css" rel="stylesheet">
        <script type="text/javascript" src="api-ws.js"></script>
        <script type="text/javascript" src="api.js"></script>
        <script type="text/javascript">
            // Called when track ends playing
            function popTrack(meta) {
                let container = document.getElementById("tracks");

                let row = document.createElement("div");
                row.classList = "track adding";
                row.setAttribute("data-filepath", meta.filePath);

                let titleEl = document.createElement("span");
                titleEl.classList = "title";
                titleEl.innerText = meta.title;
                row.appendChild(titleEl);

                let artistEl = document.createElement("span");
                artistEl.classList = "artist";
                artistEl.innerText = meta.artist;
                row.appendChild(artistEl);
                
                if(container.firstChild) {
                    container.insertBefore(row, container.firstChild);
                }
                else {
                    container.appendChild(row);
                }

                setTimeout(() => {
                    row.classList = "track";
                }, 1);
            }

            // Called when new track plays
            function pushTrack() {/*noop*/}

            // Called when bpm changes
            function onBpmChanged(bpm) {
            }
        </script>
    </head>
    <body>
        <div class="header"><span>Previous</span></div>
        <div id="overlay">
            <div class="tracks" id="tracks">
                <!-- tracks will go here -->
            </div>
        </div>
    </body>
</html>